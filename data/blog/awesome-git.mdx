---
title: 'Awesome Git'
date: '2025-06-11'
tags: ['awesome tool']
summary: 'å¤šå¹´ git ä½¿ç”¨ç»éªŒï¼Œåˆ†äº«ä¸€äº›å°æŠ€å·§ï¼Œè®©ä½ åœ¨å¹³æ—¶çš„ git å¤„ç†ä¸­å¾—å¿ƒåº”æ‰‹ã€‚'
images: [https://picsum.photos/id/23/1920/1080.webp]
layout: PostBanner
---

## çµ®å¨ä¸€ä¸‹

> **æœ¬æ–‡åŸºäº git version 2.32.0**

ç›¸è¾ƒäº `SourceTree` ä¹‹ç±»çš„å¯è§†åŒ–å›¾å½¢ git ç®¡ç†è½¯ä»¶, æˆ‘ä¸ªäººæ›´å–œæ¬¢ä½¿ç”¨ç®€å•çš„å‘½ä»¤è¡Œå»å¤„ç† git ç›¸å…³çš„å·¥ä½œï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼š

1. è£…é€¼å˜›ğŸ¶ï¼ˆå¼€ä¸ªç©ç¬‘ï½ï¼‰
2. ç†Ÿæ‚‰å„ä¸ªå‘½ä»¤ï¼Œæˆ‘ä¼šå¾ˆæ¸…æ¥šå„ä¸ªæ–‡ä»¶ã€åˆ†æ”¯ã€commitçš„çŠ¶æ€ï¼Œæ¯”å›¾å½¢åŒ–çš„ä¸œè¥¿è®©æˆ‘æ›´åŠ å®‰å¿ƒ
3. é…ç½®å¥½ä¸‹æ–‡çš„å„ä¸ªå‘½ä»¤åˆ«åï¼Œä½ åˆ‡æ¢è½¯ä»¶åŠŸå¤«ï¼Œæˆ‘å¯èƒ½å·²ç»å®Œæˆå¯¹åº”çš„å·¥ä½œğŸ˜

> å¹³æ—¶ vscode çš„ `Source Control` æˆ‘ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚æŠŠæ–‡ä»¶ä» Staged çŠ¶æ€å›åˆ° Modified çŠ¶æ€ã€‚æœ‰ä¸€è¯´ä¸€ï¼Œè¿™ä¸ªæ¯”æ•²å‘½ä»¤å¿«è€Œä¸”ä¾¿æ·å¾ˆå¤šï¼

---

## é…ç½®åˆ«å

`.zshrc` ä¸­é»˜è®¤é…ç½®äº† `git` æ’ä»¶ï¼Œå†…ç½®äº†å¾ˆå¤šåˆ«åï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆæˆ‘ï¼Œåˆ«åå½“ç„¶è¦åšé€‚åˆè‡ªå·±çš„ï¼

```sh:é…ç½®åˆ«åå‰ï¼Œå…ˆåœ¨.zshrcä¸­é…ç½®ä¸‹gitçš„åˆ«å
# vim ~/.zshrc
alias g=git
```

```sh:è‡ªå®šä¹‰åˆ«åï¼Œå¤åˆ¶åˆ°terminalè·‘ä¸€ä¸‹å³å¯
# åª clone æŸä¸ªåˆ†æ”¯/tag, å¯¹äºå¤§å‹ä»“åº“å¾ˆå®ç”¨ g cloneb <brName/tagName> <url>
git config alias.cloneb 'clone --single-branch --branch'

# å¸¸è§„æ“ä½œ
git config alias.st status
git config alias.ad 'add -A'
git config alias.cm 'commit -m'
git config alias.ps push
git config alias.pl pull

# âœ…é«˜é¢‘ä½¿ç”¨
# å½“æœ€æ–° commit è¿˜æœªæ¨åˆ°è¿œç¨‹ä»“åº“å‰çš„ä¸‰ç§å¸¸ç”¨æ“ä½œ:
# 1. ä¿®æ”¹æœ¬æ¬¡ commit message
git config alias.cam 'commit --amend -m'
# 2. åœ¨æœ¬æ¬¡ commit ä¸Šè¿½åŠ å˜åŠ¨ï¼Œæ¯”å¦‚åˆšcommitå®Œï¼Œå‘ç°æœ‰ä¸ªä¸œè¥¿è¿˜æ²¡æ”¹
git config alias.can 'commit --amend --no-edit'
# 3. æœ¬æ¬¡ commit æœ‰äº›è®¸é—®é¢˜, æ”¾å¼ƒæäº¤å¹¶å°†ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒº
git config alias.back 'reset --soft HEAD^'

# åˆ†æ”¯ç®¡ç† (å¤šä¸€å˜´,å¯¹äºæ–°æ‰‹éœ€è¦è®¤çŸ¥åˆ°çš„æ˜¯: åˆ†æ”¯ååªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„commitæŒ‡é’ˆè€Œå·², tag ä¹Ÿä¸€æ ·â•)
git config alias.cb 'checkout -b'           # å¢
git config alias.db 'branch -d'             # åˆ  æœ¬åœ°
git config alias.fdb 'branch -D'            # åˆ  æœ¬åœ°(å¼ºåˆ¶)
git config alias.drb 'push origin --delete' # åˆ  è¿œç¨‹
git config alias.move 'branch -m'           # æ”¹
git config alias.br branch                  # æŸ¥
# â­ï¸ checkout ä½œç”¨å°±æ˜¯å¸¦ç€ HEAD æŒ‡é’ˆåˆ°å¤„è·‘~ï¼ˆg ck - å¿«é€Ÿåˆ‡è‡³ä¸Šä¸€ä¸ªåˆ†æ”¯ï¼ŒåŒç† g merge -ï¼‰
git config alias.ck checkout

# æ ‡ç­¾ç®¡ç†
# å¢ g tag <tagName>
# å•æ¨ g pso <tagName> å…¨æ¨ g pso --tags
git config alias.dt 'tag -d'                # åˆ  æœ¬åœ°
git config alias.drt 'push origin --delete' # åˆ  è¿œç¨‹

# å…¶ä»–å¸¸ç”¨æ“ä½œ
# 1. å¼€å‘åˆ°ä¸€åŠå»æ”¹bug
git config alias.sh stash
git config alias.shp 'stash pop'
# 2. å›é€€
git config alias.rv 'revert'          # å˜ç›¸å›é€€,äº§ç”Ÿä¸€ä¸ªé•œåƒçš„commit
git config alias.rh 'reset --hard'    # ä¸ --soft ç›¸æ¯”,ä¼šé‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒº
# 3. æ—¶å…‰æœº reflog & cherry-pick ç»“åˆä½¿ç”¨
## reflog èƒ½æŸ¥çœ‹HEADæŒ‡é’ˆæ‰€æœ‰è¡Œèµ°çš„è½¨è¿¹,åŒ…æ‹¬è¢«resetç§»å‡ºçš„commit; cp å°±å¯ä»¥è®©ä½ æœ‰åæ‚”è¯äº†~
git config alias.cp cherry-pick       # g cp <commit/brname>
# cp åŒºé—´ g cp  commitA..commitB  æŠŠåŒºé—´ (A, B] çš„ commit éƒ½åˆè¿›æ¥ï¼ŒA æ—©äº B çš„
# cp åŒºé—´ g cp  commitA^..commitB æŠŠåŒºé—´ [A, B] çš„ commit éƒ½åˆè¿›æ¥
# å¦‚æœæ˜¯ brname åˆ™æ˜¯æŠŠè¯¥åˆ†æ”¯æœ€æ–°commitåˆå¹¶(å†æ¬¡éªŒè¯ brname ä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆ~)

# log ç¾åŒ–
git config alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"
## æ ¹æ® commit å†…å®¹æŸ¥æ‰¾ commit
git config alias.find "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --grep"
## æ ¹æ® commit ç”¨æˆ·æŸ¥æ‰¾ commit
git config alias.findby "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --author"
```

æ–°ç‰ˆæœ¬ git æ–°å¢äº† `switch/restore` å‘½ä»¤, çœŸå°±ä¸€æ¬¡æ²¡ç”¨è¿‡ğŸ˜†~

> æ³¨æ„ï¼šreflog æŸ¥çœ‹çš„æ˜¯æœ¬åœ°å†å²ï¼Œåœ¨åˆ«çš„ç”µè„‘ä¸Šæ˜¯çœ‹ä¸è§çš„ï¼ŒåŒç†å¦‚æœç”µè„‘åäº†ï¼Œé‚£ä¹ˆå†ä¹Ÿå›ä¸åˆ°æœªæ¥äº†...å¦å¤–ï¼Œgit reflog ä¸ä¼šæ°¸è¿œä¿æŒï¼ŒGit ä¼šå®šæœŸæ¸…ç†é‚£äº› â€œç”¨ä¸åˆ°çš„â€ å¯¹è±¡ï¼Œä¸è¦æŒ‡æœ›å‡ ä¸ªæœˆå‰çš„æäº¤è¿˜ä¸€ç›´åœ¨é‚£é‡Œã€‚

### ç”¨æˆ·ä¿¡æ¯é…ç½®

ä¸ªäººä¹ æƒ¯æ˜¯å…¬å¸çš„é¡¹ç›®éƒ½å•ç‹¬é…ç½®ï¼Œå…¨å±€é…ç½®ç»™è‡ªå·±ç”¨ã€‚

```sh
# ç‹¬ç«‹é…ç½®
g config user.name 'xxx'
g config user.email 'yourmail@xx.com'

# å…¨å±€é…ç½®
git config user.name 'xxx'
git config user.email 'yourmail@xx.com'
```

### HEAD çŸ¥å¤šå°‘

è¯´ä¸€ä¸‹åŸºç¡€è®¤çŸ¥ï¼š

- æ‰€æœ‰çš„ commit ç»„æˆäº†ä¸€é¢—å¤šå‰æ ‘
- branchName æ˜¯å¤šå‰æ ‘çš„æŸä¸ªåˆ†æ”¯æŒ‡é’ˆ, æŒ‡å‘è¿™æ¡åˆ†æ”¯ä¸Šæœ€æ–°çš„ commit
- tagName å¯ä»¥çœ‹æˆæ˜¯å¯¹åº” commit çš„åˆ«å

è€Œ `HEAD` æ˜¯ç‰¹æ®Šçš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯å½“å‰å·¥ä½œå°æ‰€å¤„çš„ commitã€‚

å¸¸ç”¨çš„ HEAD ç®€å†™ `HEAD^n` ä¸ `HEAD~n`ï¼š

- HEAD^^^ ç­‰ä»·äº HEAD~3 è¡¨ç¤ºçˆ¶çˆ¶çˆ¶æäº¤
- HEAD^3 è¡¨ç¤ºçš„æ˜¯çˆ¶æäº¤çš„ç¬¬ä¸‰ä¸ªæäº¤ï¼Œå³åˆå¹¶è¿›æ¥çš„å…¶ä»–æäº¤

---

## æäº¤è§„èŒƒ

é€šè¿‡ `husky` + `lint-staged` é…åˆæ¥è¿›è¡Œçº¦æŸï¼Œè¯¦ç»†é…ç½®æ ¹æ®é¡¹ç›®æ¥è®¾å®šã€‚

## å¸¸è§é—®é¢˜

#### git log ä¸­æ–‡å­—ç¬¦ä¹±ç 

```yml
# vim ~/.gitconfig
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
export LESSHARESET=utf-8
```

#### å¤„ç†æ‹’ç»åˆå¹¶ä¸ç›¸å…³å†å²

`fatal: refusing to merge unrelated histories`

```sh {lineNos=false}
g plo develop --allow-unrelated-histories
```

#### Git error on git pull (unable to update local ref)

```sh
g remote prune origin
```

### å‚è€ƒ

- [Pro Git 2nd Edition](https://git-scm.com)
- [â€œçº¸ä¸Šè°ˆå…µâ€ä¹‹ Git åŸç†](https://mp.weixin.qq.com/s/FSBEM2GqhpVJ6yw9FkxnGA)
- [Git Tools - Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
- [Git submodule å­æ¨¡å—çš„ç®¡ç†å’Œä½¿ç”¨](https://www.jianshu.com/p/9000cd49822c)
