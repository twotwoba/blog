---
title: 'Awesome Git'
date: '2025-06-11'
tags: ['awesome tool']
summary: 'å¤šå¹´ git ä½¿ç”¨ç»éªŒï¼Œåˆ†äº«ä¸€äº›å°æŠ€å·§ï¼Œè®©ä½ åœ¨å¹³æ—¶çš„ git å¤„ç†ä¸­å¾—å¿ƒåº”æ‰‹ã€‚'
images: [https://picsum.photos/id/23/1920/1080.webp]
layout: PostBanner
---

## çµ®å¨ä¸€ä¸‹

> **æœ¬æ–‡åŸºäº git version 2.32.0**

ç›¸è¾ƒäº `SourceTree` ä¹‹ç±»çš„å¯è§†åŒ–å›¾å½¢ git ç®¡ç†è½¯ä»¶, æœ¬äººæ›´å–œæ¬¢ä½¿ç”¨ç®€å•çš„å‘½ä»¤å»å¤„ç† git ç›¸å…³çš„å·¥ä½œï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼š

1. è£…é€¼å˜›ğŸ¶ï¼ˆå¼€ä¸ªç©ç¬‘ï½ï¼‰
2. ç†Ÿæ‚‰å„ä¸ªå‘½ä»¤ï¼Œæˆ‘ä¼šå¾ˆæ¸…æ¥šå„ä¸ªæ–‡ä»¶ã€åˆ†æ”¯ã€commitçš„çŠ¶æ€ï¼Œæ¯”å›¾å½¢åŒ–çš„ä¸œè¥¿è®©æˆ‘æ›´åŠ å®‰å¿ƒ
3. é…ç½®å¥½ä¸‹æ–‡çš„å„ä¸ªå‘½ä»¤åˆ«åï¼Œåˆ‡æ¢è½¯ä»¶åŠŸå¤«ï¼Œæˆ‘å¯èƒ½å·²ç»å®Œæˆå¯¹åº”çš„å·¥ä½œğŸ˜

> ğŸ”¥ å½“ç„¶äº†ï¼Œå¹³æ—¶ vscode çš„ `Source Control` æˆ‘ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚æŠŠæ–‡ä»¶ä» Staged çŠ¶æ€åˆ‡æ¢åˆ° Modified çŠ¶æ€ã€‚æœ‰ä¸€è¯´ä¸€ï¼Œè¿™ä¸ªæ¯”æ•²å‘½ä»¤å¿«è€Œä¸”ä¾¿æ·å¾ˆå¤šï¼

---

## é…ç½®åˆ«å

`.zshrc` ä¸­é»˜è®¤é…ç½®äº† `git` æ’ä»¶ï¼Œå†…ç½®äº†å¾ˆå¤šåˆ«åï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆæˆ‘ï¼Œåˆ«åå½“ç„¶è¦åšé€‚åˆè‡ªå·±çš„ï¼

```sh:é…ç½®åˆ«åå‰ï¼Œå…ˆåœ¨.zshrcä¸­é…ç½®ä¸‹gitçš„åˆ«å
# vim ~/.zshrc
alias g=git
```

```sh:è‡ªå®šä¹‰åˆ«åï¼Œå¤åˆ¶åˆ°terminalè·‘ä¸€ä¸‹å³å¯
# åª clone æŸä¸ªåˆ†æ”¯/tag, å¯¹äºå¤§å‹ä»“åº“å¾ˆå®ç”¨ g cloneb <brName/tagName> <url>
git config alias.cloneb 'clone --single-branch --branch'

# å¸¸è§„æ“ä½œ
git config alias.st status
git config alias.ad 'add -A'
git config alias.cm 'commit -m'
git config alias.ps push
git config alias.pl pull

# âœ…é«˜é¢‘ä½¿ç”¨
# å½“æœ€æ–° commit è¿˜æœªæ¨åˆ°è¿œç¨‹ä»“åº“å‰çš„ä¸‰ç§å¸¸ç”¨æ“ä½œ:
# 1. ä¿®æ”¹æœ¬æ¬¡ commit message
git config alias.cam 'commit --amend -m'
# 2. åœ¨æœ¬æ¬¡ commit ä¸Šè¿½åŠ å˜åŠ¨ï¼Œæ¯”å¦‚åˆšcommitå®Œï¼Œå‘ç°æœ‰ä¸ªä¸œè¥¿è¿˜æ²¡æ”¹
git config alias.can 'commit --amend --no-edit'
# 3. æœ¬æ¬¡ commit æœ‰äº›è®¸é—®é¢˜, æ”¾å¼ƒæäº¤å¹¶å°†ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒº
git config alias.back 'reset --soft HEAD^'

# âœ…åˆ†æ”¯ç®¡ç†ï¼Œä¹Ÿæ˜¯é«˜é¢‘ä½¿ç”¨çš„
# å¦‚æœèƒ½æ„è¯†åˆ°ã€åˆ†æ”¯å/Tagåã€‘åªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„commitæŒ‡é’ˆè€Œå·²ï¼Œé‚£ä½ çš„ git æ°´å¹³åº”è¯¥ä¸ä¼šå¤ªå·®
# â­ï¸ checkout ä½œç”¨å°±æ˜¯å¸¦ç€ HEAD æŒ‡é’ˆåˆ°å¤„è·‘~ï¼ˆg ck - å¿«é€Ÿåˆ‡è‡³ä¸Šä¸€ä¸ªåˆ†æ”¯ï¼ŒåŒç† g merge -ï¼‰
git config alias.ck checkout                # åŠ¨èµ·æ¥ï½
git config alias.cb 'checkout -b'           # å¢
git config alias.db 'branch -d'             # åˆ  æœ¬åœ°
git config alias.fdb 'branch -D'            # åˆ  æœ¬åœ°(å¼ºåˆ¶)
git config alias.drb 'push origin --delete' # åˆ  è¿œç¨‹
git config alias.rb 'branch -m'             # æ”¹
git config alias.br branch                  # æŸ¥

# âœ…å›é€€ç®¡ç†
# ç²—æš´ å·¥ä½œåŒº/æš‚å­˜åŒºå…¨éƒ¨é‡ç½®
git config alias.rs 'reset --soft'
# æ¸©æŸ” å·¥ä½œåŒº/æš‚å­˜åŒºå…¨éƒ¨ä¿ç•™
git config alias.rh 'reset --hard'
# âš ï¸ æ³¨æ„ï¼Œå·²ç»æäº¤çš„commitï¼Œå›é€€åéœ€è¦ g ps -f å¼ºåˆ¶æ¨é€ï¼Œå›¢é˜Ÿæˆå‘˜è¦æå‰æ²Ÿé€šå¥½
# æˆ–è€…å¯ä»¥ä½¿ç”¨ revert æ¥äº§ç”Ÿä¸€ä¸ªé•œåƒçš„æ–° commit æ¥è¾¾åˆ°å›é€€çš„ç›®çš„
git config alias.rv 'revert'

# ä¸´æ—¶å­˜å‚¨ï¼Œé€‚åˆå¼€å‘è¿‡ç¨‹ä¸­å»ä¿®ç´§æ€¥bugâ€¼ï¸
git config alias.sh stash
git config alias.shp 'stash pop'

# æ ‡ç­¾ç®¡ç†
# g tag <name>        # å¢ ä¸€èˆ¬éƒ½é€šè¿‡ npm version major|minor|patch ç­‰å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾
# g tag -d <name>     # åˆ  (åˆ è¿œç¨‹tagåŒåˆ è¿œç¨‹åˆ†æ”¯ï¼Œä¾§é¢éªŒè¯tagæœ¬è´¨ä¹Ÿå°±æ˜¯commitæŒ‡é’ˆç½¢äº†)
# g ps origin --tags  # æ¨é€å…¨éƒ¨æ ‡ç­¾


# ğŸ”¨é«˜çº§ç”¨æ³•
# 1. æ—¶å…‰æœº: reflog & cherry-pick ç»“åˆä½¿ç”¨
# ğŸ®reflog èƒ½æŸ¥çœ‹HEADæŒ‡é’ˆæ‰€æœ‰è¡Œèµ°çš„è½¨è¿¹,åŒ…æ‹¬å› resetèˆå¼ƒçš„commitï¼Œè¿™æ ·ï¼Œcherry-pick å°±å¯ä»¥è®©ä½ æœ‰åæ‚”è¯äº†~
git config alias.cp cherry-pick       # g cp <commit/branch-name>
# cp åŒºé—´ g cp  commitA..commitB  æŠŠåŒºé—´ (A, B] çš„ commit éƒ½åˆè¿›æ¥ï¼ŒA æ—©äº B çš„
# cp åŒºé—´ g cp  commitA^..commitB æŠŠåŒºé—´ [A, B] çš„ commit éƒ½åˆè¿›æ¥
# å¦‚æœæ˜¯åˆ†æ”¯ååˆ™æ˜¯æŠŠè¯¥åˆ†æ”¯æœ€æ–°commitåˆå¹¶(å†æ¬¡éªŒè¯åˆ†æ”¯åæœ¬è´¨ä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆ~)
# 2. æ‰‹æœ¯åˆ€: rebase -iï¼Œå¯ä»¥å®ç° pick,drop,squashâœ… ç­‰æ“ä½œ
git config alias.ri 'rebase -i'

# âœ…log ç¾åŒ–
git config alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"
# æ ¹æ® commit å†…å®¹æŸ¥æ‰¾ commit
git config alias.find "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --grep"
# æ ¹æ® commit ç”¨æˆ·æŸ¥æ‰¾ commit
git config alias.findby "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --author"

# config çš„åˆ«åï¼Œä¾¿äºé…ç½®å’Œè®¾ç½®
git config alias.c config
git config alias.cg 'config --global'
git config alias.clg 'config --list --global'
git config alias.cll 'config --list --local'

# ä¸Šè¿°å‘½ä»¤æ˜¯å¹³æ—¶é«˜é¢‘ä½¿ç”¨çš„ï¼Œè¿˜æœ‰å¾ˆå¤šå‘½ä»¤æ²¡æœ‰è®°å½•ï¼Œè¯·è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£ã€‚
```

> æ³¨æ„ï¼š`reflog` æŸ¥çœ‹çš„æ˜¯æœ¬åœ°å†å²ï¼Œåœ¨åˆ«çš„ç”µè„‘ä¸Šæ˜¯çœ‹ä¸è§çš„ï¼ŒåŒç†å¦‚æœç”µè„‘åäº†ï¼Œé‚£ä¹ˆå†ä¹Ÿå›ä¸åˆ°æœªæ¥äº†...å¦å¤–ï¼Œ`reflog` ä¸ä¼šæ°¸è¿œä¿å­˜ï¼ŒGit ä¼šå®šæœŸæ¸…ç†é‚£äº› â€œç”¨ä¸åˆ°çš„â€ å¯¹è±¡ï¼Œä¸è¦æŒ‡æœ›å‡ ä¸ªæœˆå‰çš„æäº¤è¿˜ä¸€ç›´åœ¨é‚£é‡Œã€‚

> æ–°ç‰ˆæœ¬ git å¢åŠ äº† `switch/restore` å‘½ä»¤, çœŸå°±ä¸€æ¬¡æ²¡ç”¨è¿‡ï¼Œå¯ä»¥è‡ªè¡Œç ”ç©¶ğŸ§

### é…ç½®ç”¨æˆ·

ä¸ªäººä¹ æƒ¯æ˜¯å…¬å¸é¡¹ç›®éƒ½å•ç‹¬é…ç½®ï¼Œå…¨å±€é…ç½®ç»™è‡ªå·±ç”¨ã€‚

```sh
# é¡¹ç›®ä¸­é…ç½®
g c user.name 'Eric'
g c user.email 'yourmail@xx.com'

# å…¨å±€é…ç½®
g cg user.name 'Eric'
g cg user.email 'twotwoba@126.com'
```

### HEAD çŸ¥å¤šå°‘

`HEAD` æ˜¯ç‰¹æ®Šçš„æŒ‡é’ˆï¼Œé»˜è®¤æŒ‡å‘çš„æ˜¯å½“å‰æœ€æ–°çš„ commitï¼Œè¿™ä¸ªä¼—æ‰€å‘¨çŸ¥ï¼Œä½†æ˜¯ `HEAD~` å’Œ `HEAD^` å¾ˆå¤šäººå°±çŠ¯è¿·ç³Šäº†ã€‚å…¶å®éå¸¸ç®€å•ï¼š

- ç´§è·Ÿç€ HEAD çš„ `~` å’Œ `^` éƒ½è¡¨ç¤º HEAD æŒ‡é’ˆå¾€åé€€ä¸€æ­¥ï¼Œå³æŒ‡å‘çˆ¶æäº¤ï¼Œæœ‰å‡ ä¸ªç¬¦å·å°±ä»£è¡¨å¾€åç§»åŠ¨å‡ æ­¥
- ä½†æ˜¯å½“å®ƒä»¬åé¢è·Ÿäº†æ•°å­—ï¼Œåˆ™å«ä¹‰å°±ä¸ä¸€æ ·äº†ï¼š

    - `HEAD~3`ï¼Œè¡¨ç¤ºå¾€åé€€3æ­¥ï¼Œä¸ `HEAD~~~` å’Œ `HEAD^^^` ç­‰ä»·
    - `HEAD^3`ï¼Œè¡¨ç¤ºå¾€åé€€1æ­¥ï¼Œå¹¶æŒ‡å‘ç¬¬3ä¸ªçˆ¶æäº¤ï¼ˆæ˜¯çš„çˆ¶æäº¤å¯èƒ½æœ‰å¤šä¸ªï¼Œæ¯”å¦‚åˆå¹¶ä»£ç ï¼‰

---

## å¸¸è§é—®é¢˜

#### git log ä¸­æ–‡å­—ç¬¦ä¹±ç 

```yml
# vim ~/.gitconfig
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
export LESSHARESET=utf-8
```

#### fatal: refusing to merge unrelated histories

```sh {lineNos=false}
g pl origin develop --allow-unrelated-histories
```

#### Git error on git pull (unable to update local ref)

```sh
g remote prune origin
```

## å‚è€ƒ

- [Pro Git 2nd Edition](https://git-scm.com)
- [â€œçº¸ä¸Šè°ˆå…µâ€ä¹‹ Git åŸç†](https://mp.weixin.qq.com/s/FSBEM2GqhpVJ6yw9FkxnGA)
